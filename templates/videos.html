{% extends 'layout.html' %}

{% block content %}
    <h2 class="mb-1 ml-2"><a href="{{ url_for('video_list') }}">Videos</a></h2>

    {% for thumbnail, title, description, youtube_url, vimeo_url, download_url, webpage_url in video_list %}
        <div class="border mt-3 rounded">
            <div class="media m-2">
                {% set full_webpage_url = url_for('video_info', page_name=webpage_url) %}
                <a href="{{ full_webpage_url }}" class="align-self-center mr-3">
                    <img src="{{ get_thumbnail_url(thumbnail, 150, -1) }}"
                         alt="{{ title }}" style="width: 150px;">
                </a>
                <div class="media-body">
                    <a href="{{ full_webpage_url }}" class="text-body">
                        <h5 class="mt-0">{{ title }}</h5>
                    </a>

                    {{ description }}<br/>

                    Watch on

                    {% if youtube_url %}
                        <a href="https://youtube.com/watch?v={{ youtube_url }}">Youtube</a>{#
                        #}{% if vimeo_url or download_url and not (vimeo_url and download_url) %} or{#
                        #}{% elif vimeo_url and download_url %}, {% else %}.{% endif %}
                    {% endif %}
                    {% if vimeo_url %}
                        <a href="https://vimeo.com/{{ vimeo_url }}">Vimeo</a>{#
                        #}{% if download_url %}{% if youtube_url %},{% endif %} or {% else %}.{% endif %}
                    {% endif %}
                    {% if download_url %}
                        <a href="#{{ download_url }}">Watch or Download Directly</a>.
                    {% endif %}
                </div>
            </div>
        </div>
    {% endfor %}

    <nav aria-label="Video Navigation" class="mt-3">
        <ul class="pagination justify-content-end">
            <span class="align-self-center mr-3">
                {{ ((page_num - 1) * videos_per_page) + 1 }} - {{ [((page_num) * videos_per_page), video_count] | min }} of {{ video_count }}
            </span>
            <li class="page-item {% if page_num <= 1 %}disabled{% endif %}">
                <a class="page-link" href="{{ url_for('video_list', page=(page_num - 1)) }}" aria-label="Previous">
                    <span aria-hidden="true">&laquo;</span>
                    <span class="sr-only">Previous</span>
                </a>
            </li>
            {% for p in range(page_count) %}
                <li class="page-item"><a class="page-link"
                                         href="{{ url_for('video_list', page=(p + 1)) }}">{{ p + 1 }}</a></li>
            {% endfor %}
            <li class="page-item {% if page_num >= page_count %}disabled{% endif %}">
                <a class="page-link" href="{{ url_for('video_list', page=(page_num + 1)) }}" aria-label="Next">
                    <span aria-hidden="true">&raquo;</span>
                    <span class="sr-only">Next</span>
                </a>
            </li>
        </ul>
    </nav>

{% endblock content %}